from django import forms

from CLEI.apps.articulo.models import Articulo, Topico, Puntuacion

# Create your models here.
class CleiForm(forms.ModelForm):
    def __init__(self, num_articulos=None):
	self.num_articulos = num_articulos
        self.aceptables = []
        self.aceptables1 = []
        self.aceptados = []
        self.empatados = []
        self.articulos = {}
        self.lista_articulos = []
        self.miembros_cp = {}
        self.evaluaciones = {}
        self.inscritos = {}
        
    def get_num_articulos(self):
	return self.num_articulos
	
    # Metodo que crea el diccionario de articulos
    def crear_articulos(self):
	articulos = Articulo.objects.all()
	tam_articulos = len(articulos)
	for i in range(tam_articulos):
	    self.articulos[articulos.id_articulo] = articulos[i]
    
    def get_aceptables(self):
    # creamos la lista de los articulos aceptables
	aceptables=[]
	p = Puntuacion.objects.all()
	tam = len(p)
	for i in range(tam):
	    if Puntuacion.objects.filter(id_articulo=p[i].id_articulo_id).count()>=2:
		if p[i].puntuacion>=3:
		    aceptables.append(p[i])
	return aceptables
